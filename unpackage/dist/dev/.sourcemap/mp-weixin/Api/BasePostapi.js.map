{"version":3,"file":"BasePostapi.js","sources":["Api/BasePostapi.ts"],"sourcesContent":["\nimport { IMode } from \"../Mode/IMode\";\nimport { IBasePostapi } from \"./IBasePostapi\";\r\nexport interface postdata{\r\n\taccess_token:string;\r\n\tcontent?:unknown;\r\n\tmessage?:string;\r\n}\r\nexport class BasePostapi implements IBasePostapi {\n  private _apiurl: string;\n  private _header: Record<string, string>;\n  private _postdata:any;\n  public constructor(apiurl: string) {\n    this._apiurl = apiurl;\n    this._header = {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + uni.getStorageSync('token') // 示例：添加 Token\n    };\n  }\n   public set Postdata(value:postdata) {\r\n   \t  this._postdata=value;\r\n   }\n  public async Postapi<T extends IMode>(method:any='POST'): Promise<T> {\n    try {\n      const response = await uni.request({\n        url: this._apiurl,\n        method: method,\n        header: this._header,\r\n\t\tdata:this._postdata,\n        timeout: 10000 // 超时设置\n      });\n\n      if (response.statusCode === 200||response.statusCode===201||response.statusCode===304) {\n        return response.data as T;\n      } else {\r\n\t\t  console.log(response.data)\n        throw new Error(`请求失败，状态码：${response.statusCode}`);\n      }\n    } catch (err) {\n      console.error('API 请求异常:', err);\n      throw err; // 向上抛出错误供调用方处理\n    }\n  }\n}"],"names":["uni"],"mappings":";;;;;;;;AAQO,MAAM,YAAoC;AAAA,EAIxC,YAAY,QAAgB;AAH3B;AACA;AACA;AAEN,SAAK,UAAU;AACf,SAAK,UAAU;AAAA,MACb,gBAAgB;AAAA,MAChB,iBAAiB,YAAYA,oBAAI,eAAe,OAAO;AAAA;AAAA,IAAA;AAAA,EAE3D;AAAA,EACC,IAAW,SAAS,OAAgB;AACjC,SAAK,YAAU;AAAA,EAClB;AAAA,EACD,MAAa,QAAyB,SAAW,QAAoB;AAC/D,QAAA;AACI,YAAA,WAAW,MAAMA,cAAA,MAAI,QAAQ;AAAA,QACjC,KAAK,KAAK;AAAA,QACV;AAAA,QACA,QAAQ,KAAK;AAAA,QACnB,MAAK,KAAK;AAAA,QACJ,SAAS;AAAA;AAAA,MAAA,CACV;AAEG,UAAA,SAAS,eAAe,OAAK,SAAS,eAAa,OAAK,SAAS,eAAa,KAAK;AACrF,eAAO,SAAS;AAAA,MAAA,OACX;AACTA,sBAAA,MAAY,MAAA,OAAA,4BAAA,SAAS,IAAI;AACrB,cAAM,IAAI,MAAM,YAAY,SAAS,UAAU,EAAE;AAAA,MACnD;AAAA,aACO,KAAK;AACZA,oBAAA,MAAc,MAAA,SAAA,4BAAA,aAAa,GAAG;AACxB,YAAA;AAAA,IACR;AAAA,EACF;AACF;;"}