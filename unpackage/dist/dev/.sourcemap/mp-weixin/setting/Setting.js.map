{"version":3,"file":"Setting.js","sources":["setting/Setting.ts"],"sourcesContent":["import { error } from \"console\";\nimport { IMode } from \"../Mode/IMode\";\n\nexport interface Stroemode{\r\n\t//密钥\r\n\tKey:string;\r\n\t//是否使用gitee存储方式\r\n\tIsup:boolean;\r\n\t//仓库地址\r\n\tWarehouse:string\r\n\t\r\n\t}\r\n\r\nexport class Setting{\r\n\tprivate _Stroemode:Stroemode | undefined;\r\n\t\t//private _Isup:boolean;\r\n\tset OutStromode(value:Stroemode) {\r\n\t\tthis._Stroemode=value;\r\n\t}\r\n\tpublic GetWxChanel(pagekey:string,where:string):string{\r\n\t\tlet re:any;\r\n\t\t    re= wx.getStorageSync(pagekey) as JSON;\r\n\t\t\tif(re==null||re==undefined)\r\n\t\t\t //return re[where];\r\n\t\t\tthrow new Error(\"chanel is no value\");\r\n\t\t\t//console.log(re);\r\n\t\t\tif(re[where]==undefined)\r\n\t\t\tthrow new Error(\"chanel is underfind\");\r\n\t\t\treturn re[where];\r\n\t\t\t\r\n\t}\r\n\tpublic DelWxChanel(pagekey:string){\r\n\t\twx.removeStorage({\r\n\t\t\tkey:pagekey,\r\n\t\t\tsuccess() {\r\n\t\t\t\tconsole.log(pagekey +\"be removed\");\r\n\t\t\t},\r\n\t\t\tfail(err) {\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t//通把数据存储在内存中实现通道传递\r\n\tpublic async SetWxChanel(pagekey:string,data:JSON){\r\n\t\t//console.log(data);\r\n\t\t wx.setStorage({\r\n\t\t    key: pagekey,\r\n\t\t    data: data,\r\n\t\t    success: function () {\r\n\t\t     // console.log('设置缓存数据成功');\r\n\t\t    }\r\n\t\t  });\r\n\r\n\t}\r\n\tpublic Wxstore(){\r\n\t\tif(this._Stroemode==undefined)\r\n\t\tthrow new Error(\"Stromode is undefined\");\r\n\t\tlet jsonstr:string=JSON.stringify(this._Stroemode);\r\n\t\twx.setStorageSync('userInfo', jsonstr);\r\n\t\t}\r\n\tpublic GetWxStore():string{\r\n\t\tlet str:string|null= wx.getStorageSync('userInfo');\r\n\t\tif(str==null){\r\n\t\t\tthrow new Error (\"getwxstore is null\");\r\n\t\t}\r\n\t\telse return str;\r\n\t\t}\r\n\tpublic DeletWxStroe(){\r\n\t\t wx.removeStorageSync('userInfo');\r\n\t}\r\n\t}\r\n\r\n"],"names":["wx","uni"],"mappings":";;;;;;;;AAaO,MAAM,QAAO;AAAA,EAAb;AACE;AAAA;AAAA;AAAA,EAER,IAAI,YAAY,OAAiB;AAChC,SAAK,aAAW;AAAA,EACjB;AAAA,EACO,YAAY,SAAe,OAAoB;AACjD,QAAA;AACI,SAAAA,cAAA,KAAG,eAAe,OAAO;AAC7B,QAAA,MAAI,QAAM,MAAI;AAEX,YAAA,IAAI,MAAM,oBAAoB;AAEjC,QAAA,GAAG,KAAK,KAAG;AACR,YAAA,IAAI,MAAM,qBAAqB;AACrC,WAAO,GAAG,KAAK;AAAA,EAEjB;AAAA,EACO,YAAY,SAAe;AACjCA,kBAAAA,KAAG,cAAc;AAAA,MAChB,KAAI;AAAA,MACJ,UAAU;AACTC,sBAAA,MAAY,MAAA,OAAA,4BAAA,UAAS,YAAY;AAAA,MAClC;AAAA,MACA,KAAK,KAAK;AACTA,sBAAAA,MAAA,MAAA,OAAA,4BAAY,GAAG;AAAA,MAChB;AAAA,IAAA,CACA;AAAA,EACF;AAAA;AAAA,EAEA,MAAa,YAAY,SAAe,MAAU;AAEhDD,kBAAAA,KAAG,WAAW;AAAA,MACX,KAAK;AAAA,MACL;AAAA,MACA,SAAS,WAAY;AAAA,MAErB;AAAA,IAAA,CACD;AAAA,EAEJ;AAAA,EACO,UAAS;AACf,QAAG,KAAK,cAAY;AACd,YAAA,IAAI,MAAM,uBAAuB;AACvC,QAAI,UAAe,KAAK,UAAU,KAAK,UAAU;AAC9CA,kBAAAA,KAAA,eAAe,YAAY,OAAO;AAAA,EACrC;AAAA,EACM,aAAmB;AACrB,QAAA,MAAiBA,cAAAA,KAAG,eAAe,UAAU;AACjD,QAAG,OAAK,MAAK;AACN,YAAA,IAAI,MAAO,oBAAoB;AAAA,IACtC;AACY,aAAA;AAAA,EACZ;AAAA,EACM,eAAc;AACnBA,uBAAG,kBAAkB,UAAU;AAAA,EACjC;AACA;;"}