{"version":3,"file":"RefreshPageSever.js","sources":["severs/RefreshPageSever.ts"],"sourcesContent":["import { IMode } from \"../Mode/IMode\";\nimport{CreateUrl, Getype} from\"../Tool/CreateUrl\"\r\nimport{Setting}from\"../setting/Setting\"\r\nimport{BaseGetapi}from\"../Api/BaseGetapi\"\r\nimport { TreeNode } from \"../Tool/TreeNode\";\nimport { IoutMode } from \"../Mode/IoutMode\";\nimport { Ref, ref } from \"e:/hbuilderx/plugins/hbuilderx-language-services/builtin-dts/common/vue2and3\";\nimport { Alogrithm } from \"../Tool/Algorithm\";\nimport { fileSystemSever } from \"./fileSystemSever\";\nexport enum page{\r\n\tHome=\"RefreshHomePageSave\",\r\n}\ninterface IRefreshPageSave{\r\n\t RefreshPage<T>(item:T):Promise<T[]>,\r\n\t  RefreshPage<T>(item:T,isup:boolean):Promise<T[]>\r\n}\r\nexport class Farcy{\r\n  public Creat(option:page):IRefreshPageSave{\r\n\t  switch(option){\r\n\t\tcase \"RefreshHomePageSave\":\r\n\t\treturn new RefreshHomePageSave()\r\n\t\tdefault:throw new Error(\"no option\")\r\n\t  }\r\n  }\r\n}\r\nclass RefreshHomePageSave implements IRefreshPageSave{\r\n    Create:CreateUrl;\r\n\t//private filesystem:fileSystemSever|undefined;\r\n    //private  filetree:Promise<IMode>;\r\n    constructor(){\r\n\t\t//this.filetree=this.GetFilstFileListApi();\r\n\t\tthis.Create=new CreateUrl(new Setting().GetWxStore()) \r\n\t}\r\n\tprivate async GetFilstFileListApi():Promise<IMode>{\r\n\t let url=this.Create.Create(Getype.Gettree)\r\n\t var jsonlist=await new BaseGetapi(url).Getapi();\r\n\t console.log(jsonlist)\r\n\t var filetree:IMode[]=new TreeNode(jsonlist).GetNodes(\"tree\");\r\n\t return filetree\r\n\t} \r\n\tprivate async GetFileMapApi():Promise<IMode>{\r\n\t\tlet url=this.Create.Mianfilelist;\r\n\t\tvar jsonlist=await new BaseGetapi(url).Getapi();\r\n\t\tconsole.log(jsonlist)\r\n\t\tvar filetree:IMode[]=new TreeNode(jsonlist).GetNodes(\"tree\");\r\n\t\treturn filetree\r\n\t}\r\n\tprivate async GetNextFilelistApi(url:string):Promise<IMode>{\r\n\t\turl=this.Create.AddKey(url);\r\n\t\tvar jsonlist=await new BaseGetapi(url).Getapi();\r\n\t\tconsole.log(jsonlist)\r\n\t\tvar filetree:IMode[]=new TreeNode(jsonlist).GetNodes(\"tree\");\r\n\t\treturn filetree\r\n\t}\r\n\tpublic async RefreshPage<T>(item:T,isup:Boolean):Promise<T[]>\r\n\tpublic   async RefreshPage<T>(item:T):Promise<T[]>\n    public   async RefreshPage<T>(item:T,isup:Boolean=false):Promise<T[]>{\r\n\t\tvar mode=item as IoutMode; \r\n\t\tif(isup==true){\r\n\t\t\treturn await this.GetFileMapApi() as T[]\r\n\t\t}\r\n\t\tif(mode.path==\"\"){\r\n\t\t\treturn await this.GetFilstFileListApi() as T[]\r\n\t\t}\r\n\t\tif(new Alogrithm().Countpathnumber(mode.path)>=0){\r\n\t\t\treturn await this.GetNextFilelistApi(mode.url) as T[];\r\n\t\t}\r\n\t\tthrow new Error(\"refre is not work\");\n\t}\r\n\t\r\n}"],"names":["page","CreateUrl","Setting","Getype","BaseGetapi","uni","TreeNode","Alogrithm"],"mappings":";;;;;;;;;;;;;AASY,IAAA,yBAAAA,UAAL;AACNA,QAAA,MAAK,IAAA;AADMA,SAAAA;AAAA,GAAA,QAAA,CAAA,CAAA;AAOL,MAAM,MAAK;AAAA,EACT,MAAM,QAA6B;AACzC,YAAO,QAAO;AAAA,MACf,KAAK;AACL,eAAO,IAAI,oBAAoB;AAAA,MAC/B;AAAc,cAAA,IAAI,MAAM,WAAW;AAAA,IAClC;AAAA,EACD;AACF;AACA,MAAM,oBAA+C;AAAA;AAAA;AAAA,EAIjD,cAAa;AAHb;AAKF,SAAK,SAAO,IAAIC,eAAA,UAAU,IAAIC,gBAAAA,QAAQ,EAAE,YAAY;AAAA,EACrD;AAAA,EACA,MAAc,sBAAoC;AACjD,QAAI,MAAI,KAAK,OAAO,OAAOC,eAAAA,OAAO,OAAO;AACzC,QAAI,WAAS,MAAM,IAAIC,eAAAA,WAAW,GAAG,EAAE,OAAO;AAClCC,kBAAAA,MAAA,MAAA,OAAA,oCAAA,QAAQ;AACpB,QAAI,WAAiB,IAAIC,cAAA,SAAS,QAAQ,EAAE,SAAS,MAAM;AACpD,WAAA;AAAA,EACR;AAAA,EACA,MAAc,gBAA8B;AACvC,QAAA,MAAI,KAAK,OAAO;AACpB,QAAI,WAAS,MAAM,IAAIF,eAAAA,WAAW,GAAG,EAAE,OAAO;AAClCC,kBAAAA,MAAA,MAAA,OAAA,oCAAA,QAAQ;AACpB,QAAI,WAAiB,IAAIC,cAAA,SAAS,QAAQ,EAAE,SAAS,MAAM;AACpD,WAAA;AAAA,EACR;AAAA,EACA,MAAc,mBAAmB,KAA0B;AACtD,UAAA,KAAK,OAAO,OAAO,GAAG;AAC1B,QAAI,WAAS,MAAM,IAAIF,eAAAA,WAAW,GAAG,EAAE,OAAO;AAClCC,kBAAAA,MAAA,MAAA,OAAA,oCAAA,QAAQ;AACpB,QAAI,WAAiB,IAAIC,cAAA,SAAS,QAAQ,EAAE,SAAS,MAAM;AACpD,WAAA;AAAA,EACR;AAAA,EAGG,MAAe,YAAe,MAAO,OAAa,OAAmB;AACvE,QAAI,OAAK;AACT,QAAG,QAAM,MAAK;AACN,aAAA,MAAM,KAAK;IACnB;AACG,QAAA,KAAK,QAAM,IAAG;AACT,aAAA,MAAM,KAAK;IACnB;AACA,QAAG,IAAIC,eAAU,UAAA,EAAE,gBAAgB,KAAK,IAAI,KAAG,GAAE;AAChD,aAAO,MAAM,KAAK,mBAAmB,KAAK,GAAG;AAAA,IAC9C;AACM,UAAA,IAAI,MAAM,mBAAmB;AAAA,EACpC;AAED;;;"}