{"version":3,"file":"fileSystemSever.js","sources":["severs/fileSystemSever.ts"],"sourcesContent":["import {IoutMode} from \"../Mode/IoutMode\"\r\nimport { Alogrithm } from \"../Tool/Algorithm\";\nimport { Ref, onMounted,ref } from \"vue\";\nimport { Findflie } from \"../Tool/Findflie\";\nimport { CreateUrl, Getype } from \"../Tool/CreateUrl\";\nimport { Setting } from \"../setting/Setting\";\ninterface file{\r\n\t//当前路径\r\n\t\tnowurl:string,\r\n\t//文件列表\r\n\t\tmainlist:IoutMode[],\r\n\t//保存上一次文件列表\r\n\t\tlist:IoutMode[][],\r\n\t//当前的路径层数\r\n\t\tindex:number;\r\n\t}\r\nexport class fileSystemSever{\r\n\tprivate filesystem:Ref<file>;\r\n\tconstructor(){\r\n\t this.filesystem=ref({\r\n\t\t\tnowurl:\"/\",\r\n\t\t\tmainlist:[],\r\n\t\t\tlist:[],\r\n\t\t\tindex:-1\r\n\t\t})\r\n\t}\r\n\t//跳转到一页保存的path的\r\n\tpublic set Savenowpath(value:string) {\r\n\t\t//value+=(value+\"/\");\r\n\t\tthis.filesystem.value.nowurl=\"/\"+value;\r\n\t}\r\n\tpublic Upperpath():void{\r\n\t  this.filesystem.value.nowurl= new Alogrithm().\r\n\t\tCaptureThendelete(this.filesystem.value.nowurl,\"/\");\t\r\n\t}\r\n\tpublic get Getnowpath():string{\r\n\t\tvar len=this.filesystem.value.nowurl.length;\r\n\t\treturn this.filesystem.value.nowurl.slice(1,len)\r\n\t}\r\n\tpublic set  Savenowlist(value:IoutMode[]){\r\n\t\tthis.filesystem.value.list.push(value);\r\n\t\tthis.filesystem.value.index++; \r\n\t\t//console.log(\"sever\",this.filesystem.value.list[this.filesystem.value.index]);\r\n\t}\r\n\tpublic get Getnowindex():number{\r\n\t\treturn this.filesystem.value.index\r\n\t}\r\n\tpublic get Upperlist():IoutMode[]{\r\n\t\tif(this.filesystem.value.index<=0)\r\n\t\treturn [ {\r\n\t\turl:\"err\", path:\"0\",mode:\"0\", type:\"0\",sha:\"0\",size:\"0\",\t \r\n\t\t}]\r\n\t\tthis.filesystem.value.list.pop();\r\n\t\tthis.filesystem.value.index--;\r\n\t\tconsole.log(this.filesystem.value.index);\r\n\t\treturn this.filesystem.value.list[\r\n\t\t\tthis.filesystem.value.index\t\r\n\t\t];\r\n\t}\r\n\tpublic set SetNowlist(value:IoutMode[]){\r\n\t\tthis.filesystem.value.list[this.filesystem.value.index]\r\n\t\t=value;\r\n\t}\r\n     public set UpdataMainlist(value:IoutMode[]){\r\n\t\t this.filesystem.value.mainlist=value\r\n\t }\r\n\t public get GetNowFileurlFromPath():string{\r\n\t\t if(this.filesystem.value.nowurl==\"/\"){\r\n\t\t\t return new CreateUrl(\r\n\t\t\t new Setting().GetWxStore() as string\r\n\t\t\t ).Create(Getype.Gettree);\r\n\t\t }\r\n\t\t console.log(\"mainlist is\",this.filesystem.value.mainlist[0])\r\n\t \treturn new Findflie(this.filesystem.value.mainlist)\r\n\t\t.FindurlFromPath(this.Getnowpath);\r\n\t }\r\n}"],"names":["ref","Alogrithm","uni","CreateUrl","Setting","Getype","Findflie"],"mappings":";;;;;;;;;;;;AAgBO,MAAM,gBAAe;AAAA,EAE3B,cAAa;AADL;AAEP,SAAK,aAAWA,kBAAI;AAAA,MACnB,QAAO;AAAA,MACP,UAAS,CAAC;AAAA,MACV,MAAK,CAAC;AAAA,MACN,OAAM;AAAA,IAAA,CACN;AAAA,EACF;AAAA;AAAA,EAEA,IAAW,YAAY,OAAc;AAE/B,SAAA,WAAW,MAAM,SAAO,MAAI;AAAA,EAClC;AAAA,EACO,YAAgB;AAChB,SAAA,WAAW,MAAM,SAAQ,IAAIC,eAAAA,UACnC,EAAA,kBAAkB,KAAK,WAAW,MAAM,QAAO,GAAG;AAAA,EACnD;AAAA,EACA,IAAW,aAAmB;AAC7B,QAAI,MAAI,KAAK,WAAW,MAAM,OAAO;AACrC,WAAO,KAAK,WAAW,MAAM,OAAO,MAAM,GAAE,GAAG;AAAA,EAChD;AAAA,EACA,IAAY,YAAY,OAAiB;AACxC,SAAK,WAAW,MAAM,KAAK,KAAK,KAAK;AACrC,SAAK,WAAW,MAAM;AAAA,EAEvB;AAAA,EACA,IAAW,cAAoB;AACvB,WAAA,KAAK,WAAW,MAAM;AAAA,EAC9B;AAAA,EACA,IAAW,YAAsB;AAC7B,QAAA,KAAK,WAAW,MAAM,SAAO;AAChC,aAAO,CAAE;AAAA,QACT,KAAI;AAAA,QAAO,MAAK;AAAA,QAAI,MAAK;AAAA,QAAK,MAAK;AAAA,QAAI,KAAI;AAAA,QAAI,MAAK;AAAA,MAAA,CACnD;AACI,SAAA,WAAW,MAAM,KAAK,IAAI;AAC/B,SAAK,WAAW,MAAM;AACtBC,wBAAA,MAAA,OAAA,mCAAY,KAAK,WAAW,MAAM,KAAK;AACvC,WAAO,KAAK,WAAW,MAAM,KAC5B,KAAK,WAAW,MAAM,KACvB;AAAA,EACD;AAAA,EACA,IAAW,WAAW,OAAiB;AACtC,SAAK,WAAW,MAAM,KAAK,KAAK,WAAW,MAAM,KAAK,IACrD;AAAA,EACF;AAAA,EACI,IAAW,eAAe,OAAiB;AACxC,SAAA,WAAW,MAAM,WAAS;AAAA,EAChC;AAAA,EACA,IAAW,wBAA8B;AACxC,QAAG,KAAK,WAAW,MAAM,UAAQ,KAAI;AACpC,aAAO,IAAIC,eAAA;AAAA,QACX,IAAIC,gBAAAA,QAAQ,EAAE,WAAW;AAAA,MAAA,EACvB,OAAOC,sBAAO,OAAO;AAAA,IACxB;AACYH,kBAAAA,MAAA,MAAA,OAAA,mCAAA,eAAc,KAAK,WAAW,MAAM,SAAS,CAAC,CAAC;AACpD,WAAA,IAAII,cAAAA,SAAS,KAAK,WAAW,MAAM,QAAQ,EAClD,gBAAgB,KAAK,UAAU;AAAA,EAChC;AACF;;"}