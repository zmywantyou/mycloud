{"version":3,"file":"nexthome.js","sources":["pages/nexthome/nexthome.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbmV4dGhvbWUvbmV4dGhvbWUudnVl"],"sourcesContent":["<template>\r\n\t\n<view class=\"home-container\">\r\n\t<filenameBox/>\r\n\t<addbtn/>\n  <view class=\"file-container\">\n    <!-- 文件列表 -->\n    <view class=\"file-list\" v-if=\"isfilesnull\">\r\n\t\t\n     <view  v-for=\"item in files\":key=\"item.path\" >\r\n\t\t<view class=\"file-item\" @click=\"Skipnexthome(item)\">\n        <view class=\"file-icon\" >\n          <img :src=\"IndentIcon.Indentify(item.type,item.path)\" class=\"icon\" />\n        </view>\n        <view class=\"file-info\">\n          <text class=\"file-name\">{{item.path}}</text>\r\n\t\t <!-- <view class=\"file-actions\" >\r\n\t\t     <image src=\"/static/。。.png\" class=\"action-icon\"/>\r\n\t\t   </view> -->\n        </view>  \r\n\t\t</view>\r\n\n      </view>\n</view>\n    <!-- 空状态 -->\n    <view  class=\"empty-state\" v-else>\n      <text class=\"empty-text\">暂无文件</text>\n    </view>\n  </view>\n</view>\r\n\n</template>\n\r\n<script lang=\"ts\" setup>\r\n\timport filenameBox from \"@/complet/filenameBox.vue\";\r\n\timport addbtn from\"@/complet/addbtn.vue\";\r\n\timport { BaseGetapi } from '../../Api/BaseGetapi';\r\n\timport { IModefile } from '../../Mode/IModefile';\r\n\timport {IoutMode} from'../../Mode/IoutMode'\r\n\timport { getCurrentInstance, onMounted,ref } from \"vue\";\r\n\timport { onLoad } from '@dcloudio/uni-app';\r\n\timport { TreeNode } from \"../../Tool/TreeNode\";\r\n\timport{Indentifyicon}from\"../../Tool/Identifyicon\";\r\nimport { Setting } from '../../setting/Setting';\nimport { CreateUrl, Getype } from '../../Tool/CreateUrl';\nimport { DownloandFile } from '../../Tool/DownloadFile';\n\tlet files=ref<IoutMode[]>(); \r\n\tlet isfilesnull=ref<boolean>();\r\n\t\r\n\t//let url:string;\r\n\t//加载图标\r\n\tlet setting=new Setting;\r\n\t const Store:null|string=setting.GetWxStore();\r\n\tlet IndentIcon=new Indentifyicon(\"../../static\");\r\n\tlet url:string=setting.GetWxChanel(\"nexthome\",\"url\");\r\n\tlet baseurl:string=setting.GetWxChanel(\"nexthome\",\"path\");\r\n\tuni.$emit(\"nowurl\",baseurl);\r\n\tuni.$emit(\"nowpath\",url);\r\n\tuni.$on(baseurl,(data)=>{\r\n\t\tuni.__f__('log','at pages/nexthome/nexthome.vue:60',data);\r\n\t\tfiles.value=data\r\n\t\t});\r\n\t\tsetting.DelWxChanel(\"nexthome\")\r\n\t//uni.__f__('log','at pages/nexthome/nexthome.vue:64',url);\r\n\ttry{\r\n\t\t//组件中执行异步\r\n\t\t onMounted(async()=>{ \r\n\t\t\turl=new CreateUrl(Store as string).AddKey(url)\r\n\t\t\t//缺少creaet key 导致子文件访问失败\r\n\t\t\tvar jsonlist=await new BaseGetapi(url).Getapi();\r\n\t\t     files.value=new TreeNode(jsonlist).GetNodes(\"tree\");\r\n\t\t\t });\r\n\t\t if(files.value!=undefined){\r\n\t\t\t isfilesnull.value=false;\r\n\t\t\t throw new Error(\"files is undefied\");\r\n\t\t\t //uni.__f__('log','at pages/nexthome/nexthome.vue:76',\"\");\r\n\t\t }else{\r\n\t\t\t isfilesnull.value=true;\r\n\t\t }\r\n\t   }\r\n\t  \r\n\t\r\n\t\r\n\tcatch(err){\r\n\t\tuni.__f__('log','at pages/nexthome/nexthome.vue:85',err);\r\n\t}\r\n\tfunction Skipnexthome(item:IoutMode){\r\n\t\t\r\n\t\tuni.__f__('log','at pages/nexthome/nexthome.vue:89',item.path);\r\n\t\t//uni.__f__('log','at pages/nexthome/nexthome.vue:90',item.type)\r\n\t\tif(item.type==\"blob\"){\r\n\t\t uni.__f__('log','at pages/nexthome/nexthome.vue:92',item.path)\r\n\t\t var creaturl=new CreateUrl(Store as string);\r\n\t\t creaturl.Name=baseurl+\"/\"+item.path;\r\n\t\t //uni.__f__('log','at pages/nexthome/nexthome.vue:95',item.path);\r\n\t\t var url=creaturl.Create(Getype.GetBlob);\r\n\t\t new DownloandFile(url,item.path);}\r\n\t\r\n\t\tif(item.type==\"tree\"){\r\n\t\tuni.__f__('log','at pages/nexthome/nexthome.vue:100',\"had clicked...\");\r\n\t\tsetting.SetWxChanel(\"newfile\",JSON.parse(`{\"url\":\"${item.url}\",\"path\":\"${item.path}\"}`));\r\n\t\tsetting.SetWxChanel(\"nexthome\",JSON.parse(`{\"url\":\"${item.url}\",\"path\":\"${item.path}\"}`))\r\n\t\tuni.navigateTo({\r\n\t\t\turl:\"/pages/nexthome/nexthome\",\r\n\t\t\tsuccess() {\r\n\t\t\t\t//setting.DelWxChanel(\"nexthome\");\r\n\t\t\t}\r\n\t\t  });}}\r\n\t\r\n</script>\r\n<style>\n.home-container {\n  padding: 20rpx;\n  background-color: #f5f5f5;\n  min-height: 100vh;\n}\n\n.file-item {\n  display: flex;\n  align-items: center;\n  padding: 24rpx;\n  background: white;\n  margin-bottom: 20rpx;\n  border-radius: 12rpx;\n  box-shadow: 0 2rpx 6rpx rgba(0,0,0,0.05);\n}\n\n.file-icon .icon {\n  width: 80rpx;\n  height: 80rpx;\n  margin-right: 24rpx;\n}\n\n.file-info {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n}\n\n.file-name {\n  font-size: 32rpx;\n  color: #333;\n  margin-bottom: 8rpx;\n}\n\n.file-meta {\n  font-size: 24rpx;\n  color: #999;\n}\n.file-actions {\n  position: absolute;\n  right: 24rpx;\n  top: 50%;\n  transform: translateY(-25%);\n  opacity: 0.8;\n  transition: all 0.2s ease;\n}\n.file-actions .action-icon {\n  width: 48rpx;\n  height: 48rpx;\n  padding: 20rpx;\n}\n\n.empty-state {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 100rpx 0;\n}\n\n.empty-icon {\n  width: 200rpx;\n  height: 200rpx;\n  opacity: 0.5;\n  margin-bottom: 40rpx;\n}\n\n.empty-text {\n  color: #999;\n  font-size: 28rpx;\n}\n</style>\n\n","import MiniProgramPage from 'D:/myproject/Mycloud/Mycloud_ui/pages/nexthome/nexthome.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","Setting","Indentifyicon","uni","onMounted","CreateUrl","BaseGetapi","TreeNode","url","Getype","DownloandFile","MiniProgramPage"],"mappings":";;;;;;;;;;;AAkCC,MAAA,cAAwB,MAAA;AACxB,MAAA,SAAkB,MAAA;;;;AAWlB,QAAI,QAAMA,cAAAA;AACV,QAAI,cAAYA,cAAAA;AAIhB,QAAI,UAAQ,IAAIC,gBAAAA;AACT,UAAA,QAAkB,QAAQ;AAC7B,QAAA,aAAW,IAAIC,gCAAc,cAAc;AAC/C,QAAI,MAAW,QAAQ,YAAY,YAAW,KAAK;AACnD,QAAI,UAAe,QAAQ,YAAY,YAAW,MAAM;AACpDC,kBAAAA,MAAA,MAAM,UAAS,OAAO;AACtBA,kBAAAA,MAAA,MAAM,WAAU,GAAG;AACnBA,kBAAAA,MAAA,IAAI,SAAQ,CAAC,SAAO;AACnBA,oBAAAA,MAAA,MAAM,OAAM,qCAAoC,IAAI;AACxD,YAAM,QAAM;AAAA,IAAA,CACX;AACD,YAAQ,YAAY,UAAU;AAE5B,QAAA;AAEDC,oBAAAA,UAAU,YAAS;AACnB,cAAI,IAAIC,eAAAA,UAAU,KAAe,EAAE,OAAO,GAAG;AAE7C,YAAI,WAAS,MAAM,IAAIC,eAAAA,WAAW,GAAG,EAAE,OAAO;AAC1C,cAAM,QAAM,IAAIC,cAAA,SAAS,QAAQ,EAAE,SAAS,MAAM;AAAA,MAAA,CACpD;AACC,UAAA,MAAM,SAAO,QAAU;AACzB,oBAAY,QAAM;AACZ,cAAA,IAAI,MAAM,mBAAmB;AAAA,MAAA,OAE/B;AACJ,oBAAY,QAAM;AAAA,MACnB;AAAA,aAKI,KAAI;AACLJ,oBAAAA,MAAA,MAAM,OAAM,qCAAoC,GAAG;AAAA,IACxD;AACA,aAAS,aAAa,MAAc;AAEnCA,oBAAA,MAAI,MAAM,OAAM,qCAAoC,KAAK,IAAI;AAE1D,UAAA,KAAK,QAAM,QAAO;AACpBA,sBAAA,MAAI,MAAM,OAAM,qCAAoC,KAAK,IAAI;AACzD,YAAA,WAAS,IAAIE,yBAAU,KAAe;AACjC,iBAAA,OAAK,UAAQ,MAAI,KAAK;AAE/B,YAAIG,OAAI,SAAS,OAAOC,eAAA,OAAO,OAAO;AAClC,YAAAC,gCAAcF,MAAI,KAAK,IAAI;AAAA,MAAE;AAE/B,UAAA,KAAK,QAAM,QAAO;AACjBL,sBAAAA,MAAA,MAAM,OAAM,sCAAqC,gBAAgB;AAC7D,gBAAA,YAAY,WAAU,KAAK,MAAM,WAAW,KAAK,GAAG,aAAa,KAAK,IAAI,IAAI,CAAC;AAC/E,gBAAA,YAAY,YAAW,KAAK,MAAM,WAAW,KAAK,GAAG,aAAa,KAAK,IAAI,IAAI,CAAC;AACxFA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAI;AAAA,UACJ,UAAU;AAAA,UAEV;AAAA,QAAA,CACE;AAAA,MAAE;AAAA,IAAC;;;;;;;;;;;;;;;;;AC1GR,GAAG,WAAWQ,SAAe;"}